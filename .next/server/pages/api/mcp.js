"use strict";(()=>{var e={};e.id=833,e.ids=[833],e.modules={2344:e=>{e.exports=import("@modelcontextprotocol/sdk/types.js")},2971:e=>{e.exports=import("zod")},3480:(e,t,o)=>{e.exports=o(5600)},3863:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{default:()=>u});var n=o(9816),a=o(5523),i=o(2344);!function(){var e=Error("Cannot find module '../../src/parser/dice-notation-parser.js'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '../../src/roller/dice-roller.js'");throw e.code="MODULE_NOT_FOUND",e}();var s=o(2971),d=e([n,a,i,s]);[n,a,i,s]=d.then?(await d)():d,s.z.object({notation:s.z.string().describe('e.g., "3d6+2"'),label:s.z.string().optional().describe('e.g., "Damage roll"'),verbose:s.z.boolean().optional().describe("Show detailed breakdown")});let l=new a.Server({name:"dice-roller",version:"1.0.0"},{capabilities:{tools:{},resources:{},prompts:{}}}),c=Object(function(){var e=Error("Cannot find module '../../src/parser/dice-notation-parser.js'");throw e.code="MODULE_NOT_FOUND",e}())(),p=Object(function(){var e=Error("Cannot find module '../../src/roller/dice-roller.js'");throw e.code="MODULE_NOT_FOUND",e}())();l.setRequestHandler(i.ListToolsRequestSchema,async()=>(console.log("Tools/list called via MCP adapter"),{tools:[{name:"dice_roll",description:"Roll dice using standard notation. Supports standard dice (3d6+2), advantage/disadvantage (2d20kh1), keep/drop (4d6kh3), exploding dice (3d6!), rerolls (4d6r1), and success counting (5d10>7).",input_schema:{type:"object",properties:{notation:{type:"string",description:'Dice notation like "3d6+2", "2d20kh1", "4d6dl1", etc.'},label:{type:"string",description:"Optional label for the roll"},verbose:{type:"boolean",description:"Show detailed breakdown"}},required:["notation"]}},{name:"dice_validate",description:"Validate dice notation without rolling",input_schema:{type:"object",properties:{notation:{type:"string",description:"Dice notation to validate"}},required:["notation"]}}]})),l.setRequestHandler(i.CallToolRequestSchema,async e=>{console.log("Tool call via MCP adapter:",e.params.name);let t=e.params.name.includes(":")?e.params.name.split(":")[1]:e.params.name;if("dice_roll"===t){let{notation:t,label:o,verbose:r}=e.params.arguments,n=c.parse(t),a=p.roll(n),i=`You rolled ${t}`;return o&&(i+=` for ${o}`),i+=`:
🎲 Total: ${a.total}`,r&&(i+=`
📊 Breakdown: ${a.breakdown}`),{content:[{type:"text",text:i}]}}if("dice_validate"===t){let{notation:t}=e.params.arguments;try{let e=c.parse(t),o=`✅ Valid dice notation: ${t}`;if(e.dice.length>0)for(let t of(o+="\n\nBreakdown:",e.dice)){let e=Math.abs(t.count),r=t.count<0?"-":"+";o+=`
• ${"+"===r?"":r}${e}d${t.size}`,t.keep&&(o+=` (keep ${"h"===t.keep.type?"highest":"lowest"} ${t.keep.count})`),t.drop&&(o+=` (drop ${"h"===t.drop.type?"highest":"lowest"} ${t.drop.count})`),t.reroll&&(o+=` (reroll ${t.reroll.join(", ")})`),t.explode&&(o+=" (exploding dice)"),t.success&&(o+=` (success on ${t.success}+)`)}return 0!==e.modifier&&(o+=`
• Modifier: ${e.modifier>0?"+":""}${e.modifier}`),{content:[{type:"text",text:o}]}}catch(e){return{content:[{type:"text",text:`❌ Invalid dice notation: ${t}

Error: ${e instanceof Error?e.message:"Unknown parsing error"}`}]}}}throw Error(`Unknown tool: ${e.params.name}`)}),l.setRequestHandler(i.ListResourcesRequestSchema,async()=>({resources:[]})),l.setRequestHandler(i.ListPromptsRequestSchema,async()=>({prompts:[]}));let u=(0,n.createMcpHandler)(l);r()}catch(e){r(e)}})},5523:e=>{e.exports=import("@modelcontextprotocol/sdk/server/index.js")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},8e3:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{config:()=>c,default:()=>l,routeModule:()=>p});var n=o(3480),a=o(8667),i=o(6435),s=o(3863),d=e([s]);s=(d.then?(await d)():d)[0];let l=(0,i.M)(s,"default"),c=(0,i.M)(s,"config"),p=new n.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/mcp",pathname:"/api/mcp",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9816:e=>{e.exports=import("@vercel/mcp-adapter")}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=8e3);module.exports=o})();